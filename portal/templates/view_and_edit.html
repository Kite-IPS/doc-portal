{% extends 'dash.html' %}

{% block inital_entry %}
<section id="home">
  <div class="space"></div>
  <form action="{% url 'add' %}" method="POST">
    {% csrf_token %}
  <div class="entry-info">
    <div class="form-row">
      <div class="form-column">
        <label for="name_stu"><b>NAME OF THE STUDENT:</b></label>
        <input type="text" id="name_stu" name="name_stu" required />
      </div>
      <br />
      <div class="form-column">
        <label for="receipt"><b>ADMISSION NO:</b></label>
        <input type="text" id="receipt" name="receipt" required />
        <!--<div id="messageContainer"></div>-->
      </div>
      <div class="form-column">
        <label for="name_prnt"><b>NAME OF THE PARENT:</b></label>
        <input type="text" id="name_prnt" name="name_prnt" required />
      </div>
      <div class="form-column">
        <label for="dept"><b>DEPARMENT:</b></label>
        <div class="dropdown">
          <select id="dept" name="dept" required>
            <option disabled selected>--Department--</option>
            <option value="CSE">CSE</option>
            <option value="AI&DS">AI&DS</option>
            <option value="IT">IT</option>
            <option value="ECE">ECE</option>
            <option value="CSBS">CSBS</option>
            <option value="MECH">MECH</option>
          </select>
          <span class="dropdown-icon"></span>
          <style>
            .dropdown {
              position: relative;
              display: block;
            }

            .dropdown select {
              -webkit-appearance: none;
              -moz-appearance: none;
              appearance: none;
              outline: none;
              border: 1px solid #ccc;
              padding: 8px 40px 8px 12px;
              font-size: 16px;
              border-radius: 4px;
              background-color: #fff;
              cursor: pointer;
              width: 70%;
            }

            .dropdown select:hover,
            .dropdown select:focus {
              border-color: #555;
            }

            .dropdown-icon {
              position: relative;
              top: 50%;
              right: 30px;
              transform: translateY(-50%);
              pointer-events: none;
            }

            /* Custom styles for the dropdown arrow icon */
            .dropdown-icon::after {
              content: "\25BC";
              font-size: 12px;
              color: #555;
            }
          </style>
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="form-column">
        <label for="contact1"><b>CONTACT INFO:</b><br />STUDENT NO:</label>
        <input type="text" id="contact1" name="contact1" required />
      </div>
      <div class="form-column">
        <br /><label for="contact2">PARENT NO:</label>
        <input type="text" id="contact2" name="contact2" required />
      </div>
      <br />
      <div class="form-column">
        <br /><label for="email">EMAIL ID:</label>
        <input type="email" class="email" id="email" name="email" required />
      </div>
      <div class="form-column">
        <br /><label for="quota"><b>QUOTA:</b></label>
        <div class="dropdown">
          <select id="quota" name="quota" required>
            <option disabled selected>--Quota--</option>
            <option value="mgnt">MANAGEMENT</option>
            <option value="govt">GOVERNMENT</option>
          </select>
          <span class="dropdown-icon"></span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- for the table -->
<div class="entry-table">
  <div class="table-container">
    <table>
      <!-- Defenition of column widths -->
      <colgroup>
        <col span="1" style="width: 10%">
        <col span="1" style="width: 35%">
        <col span="1" style="width: 15%">
        <col span="1" style="width: 12.5%">
        <col span="1" style="width: 12.5%">
        <col span="1" style="width: 15%">
      </colgroup>

      <thead>
        <tr>
          <th>S.no</th>
          <th>Documents</th>
          <th>Date</th>
          <th>Original</th>
          <th>Photocopy</th>
          <th>Quantity</th>
        </tr>
      </thead>
      <tbody>
        {% for doc_name in file_names %}
        <tr>
          <td colspan="0.5">{{ forloop.counter }}</td>
          <td><p class="document_name">{{ doc_name }}</p></td>
          <td>{{ date }}</td>
          <td>
            <input
              type="hidden"
              class="form-check-input h3 w3"
              name="{{doc_name}}:original"
              value="off"
            />
            <input type="checkbox" class="form-check-input h3 w3" name="{{doc_name}}:original" />
          </td>
          <td>
            <input
              type="hidden"
              class="form-check-input h3 w3"
              name="{{doc_name}}:original"
              value="off"
            />
            <input type="checkbox" class="form-check-input h3 w3" name="{{doc_name}}:original" />
          </td>
          <td>
            <input
              type="number"
              value="{{record.count}}"
              name="{{doc_name}}:count"
              class="form_quantity_input"
              min="0"
              max="50"
            />
          </td>
        </tr>
        {% endfor %}
        <!-- Add more rows as needed -->
      </tbody>
    </table>
  </div>
    <!-- submit button -->
  <div class="submit-button" id="button">
    <button type="submit" class="btn btn-success m-4">Submit</button>
  </div>
</div>

</form>
{% endblock inital_entry %}


{% block edit %}
{{view_context}}
<div class="space-small"></div>
<section id="view-details">
    <div class="menu-2">
      <div class="entry-info">
        <div class="form-row">
          <div class="form-column">
            <label for="name_stu"><b>NAME OF THE STUDENT:</b></label>
            <input type="text" id="name_stu" name="name_stu" required />
          </div>
          <br />
          <div class="form-column">
            <label for="receipt"><b>ADMISSION NO:</b></label>
            <input type="text" id="receipt" name="receipt" required />
            <!--<div id="messageContainer"></div>-->
          </div>
          <div class="form-column">
            <label for="name_prnt"><b>NAME OF THE PARENT:</b></label>
            <input type="text" id="name_prnt" name="name_prnt" required />
          </div>
          <div class="form-column">
            <label for="dept"><b>DEPARMENT:</b></label>
            <div class="dropdown">
              <select id="dept" name="dept" required>
                <option disabled selected>--Department--</option>
                <option value="CSE">CSE</option>
                <option value="AI&DS">AI&DS</option>
                <option value="IT">IT</option>
                <option value="ECE">ECE</option>
                <option value="CSBS">CSBS</option>
                <option value="MECH">MECH</option>
              </select>
              <span class="dropdown-icon"></span>
              <style>
                .dropdown {
                  position: relative;
                  display: block;
                }

                .dropdown select {
                  -webkit-appearance: none;
                  -moz-appearance: none;
                  appearance: none;
                  outline: none;
                  border: 1px solid #ccc;
                  padding: 8px 40px 8px 12px;
                  font-size: 16px;
                  border-radius: 4px;
                  background-color: #fff;
                  cursor: pointer;
                  width: 70%;
                }

                .dropdown select:hover,
                .dropdown select:focus {
                  border-color: #555;
                }

                .dropdown-icon {
                  position: relative;
                  top: 50%;
                  right: 30px;
                  transform: translateY(-50%);
                  pointer-events: none;
                }

                /* Custom styles for the dropdown arrow icon */
                .dropdown-icon::after {
                  content: "\25BC";
                  font-size: 12px;
                  color: #555;
                }
              </style>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-column">
            <label for="contact1"
              ><b>CONTACT INFO:</b><br />STUDENT NO:</label
            >
            <input type="text" id="contact1" name="contact1" required />
          </div>
          <div class="form-column">
            <br /><label for="contact2">PARENT NO:</label>
            <input type="text" id="contact2" name="contact2" required />
          </div>
          <br />
          <div class="form-column">
            <br /><label for="email">EMAIL ID:</label>
            <input
              type="email"
              class="email"
              id="email"
              name="email"
              required
            />
          </div>
          <div class="form-column">
            <br /><label for="quota"><b>QUOTA:</b></label>
            <div class="dropdown">
              <select id="quota" name="quota" required>
                <option disabled selected>--Quota--</option>
                <option value="mgnt">MANAGEMENT</option>
                <option value="govt">GOVERNMENT</option>
              </select>
              <span class="dropdown-icon"></span>
            </div>
          </div>
        </div>
      </div>
    <!-- for the table -->
    <div class="main-table-2">
      <!-- for the table -->
      <div class="entry-table">
        <div class="table-container">
          <table id="no-edit">
            <!-- Defenition of column widths -->
            <colgroup>
              <col span="1" style="width: 10%">
              <col span="1" style="width: 40%">
              <col span="1" style="width: 15%">
              <col span="1" style="width: 10%">
              <col span="1" style="width: 10%">
              <col span="1" style="width: 15%">
            </colgroup>

            <thead>
              <tr>
                <th>S.no</th>
                <th>Documents</th>
                <th>Date</th>
                <th>Original</th>
                <th>Photocopy</th>
                <th>Quantity</th>
              </tr>
            </thead>
            <tbody>
              {% for record in view_context.records %}
                <tr>
                  <td>{{ forloop.counter }}</td>
                  <td><p class="document_name">{{ doc_name }}</p></td>
                  <td>{{ date }}</td>
                  <td>
                    <input type="hidden" class="form-check-input h3 w3" name="{{record.document.name}}:original" value="off">
                    {% if record.original %}
                    <input  type="checkbox" checked="true" class="form-check-input h3 w3" name="{{record.document.name}}:original" checked disabled>
                    {% else %}
                    <input type="checkbox" class="form-check-input h3 w3" name="{{record.document.name}}:original" disabled>
                    {% endif %}
                  </td>
                  <td>
                    <input type="hidden" class="form-check-input h3 w3" name="{{record.document.name}}:copy" value="off">
                    {% if record.photocopy %}
                    <input type="checkbox" checked="true" class="form-check-input h3 w3" name="{{record.document.name}}:copy" onclick="toggleInputField(this)" checked disabled>
                    {% else %}
                    <input type="checkbox" class="form-check-input h3 w3" name="{{record.document.name}}:copy" onclick="toggleInputField(this)" disabled>
                    {% endif %}
                  </td>
                  <td>
                    {% if record.photocopy %}
                    
                    {% else %}
                    <input disabled readonly type="number" value="0" class="form_quantity_input" name="{{record.document.name}}:count" class="cell3">
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
          <script>
            const numberInput = document.getElementById('quantity-box');
        
            let initialInputValue; // Store the initial input value

            // Add an event listener to the input field
            numberInput.addEventListener('input', function() {
                if (numberInput.value < 0) {
                    numberInput.value = 0; // Set to zero if a negative value is entered
                }
            });
          </script>
        </div>
      </div>
    </div>

    <!-- down menu -->
    <div class="down-menu">
      <nav>
        <ul class="pagination justify-content-center m-1 p-1">
          <li class="page-item disabled">
            <a
              class="page-link"
              href="#"
              tabindex="-1"
              aria-disabled="true"
            >&lt;</a>
          </li>
          <li class="page-item"><a class="page-link">Version 1</a></li>
          <li class="page-item">
            <a class="page-link" href="#">&gt;</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</section>
{% endblock edit %}