<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>desktop-main-page</title>
    <link rel="stylesheet" href="../static/css/dash.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" /> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="../static/image/logo.png">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
    <style>
      *{
        box-sizing: border-box;
        --nav_items: #66b3ff;
      }

      .top-box {
        display: flex;
        align-content: space-evenly;
        flex-direction: row;
        background: #251367;
        width: 100%;
        position: sticky;
        top: 0;
        z-index: 1;
        height:150px;
      }

      .logo{
        width: 100px;
        height: 100px;
        margin: 25px;
        background-image: url("../static/image.logo.png");
        align-self: flex-start;
      }

      .text {
        align-self: center;
        justify-content: center;
        align-items: center;
        margin: 10 auto;
        text-align: center;
        color: aliceblue;
        font-size: small;
        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
      }

      .text p{
        font-size: large;
      }

      .search-bar[input='number'] {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        width: 500px;
        padding:15px 20px;
        border-radius: 5px 0 0 5px;
        flex-wrap: nowrap;
        position: absolute;
        left: 0;
        margin-left: 15px;
      }

      @media screen and (max-width: 875px){
        .search-bar{
          width: 100px;
        }
      }
      
      .search-input {
        width: 15%;
        display: inline-block;
        align-self: flex-start;
        margin: 5 auto;
        padding: 10px;
        width: 320px;
        outline: none;
        border-radius: 5px;
        border: #007bff;
        height: 41px;
        position: absolute;
        left: 0; 
        margin-left: 15px;
        transition: 0.3s ease-in-out;
      }
      
      @media screen and (max-width: 870px){
        .search-input{
          width: 150px;
        }
      }

      @media screen and (max-width: 870px){
        .search-input{
          width: 150px;
        }
      }

      .search-bar ::placeholder {
        font-size: small;
      } 

      .search-button {
        display: inline-block;
        z-index: 2;
        padding: 9px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 0px 5px 5px 0px;
        cursor: pointer;
        outline: none;
        transition: width 0.3s ease-in-out;
        height: 41px;
        
      }

      .nav{
        display: flex;
        flex-direction: row;
      }

      .nav-container{
        z-index:1;
        position: fixed;
        top: 145px;
        width: 100%;
        background-color: var(--nav_items);
        border-radius:5px;
        padding:6px;
        height: 75px;
      }

      ul{
        display: flex;
        flex-direction: row;
        justify-content: flex-end;
        margin: 5px;
        padding: 0;
      }

      li{
        margin: 0 10px;
        list-style-type:none;
        display:inline-block;
        padding:15px 20px;
        letter-spacing:5px;
        color:#222222;
        transition:500ms;
        text-transform:uppercase;
        position:relative;
        z-index:3;
        cursor:pointer;
      }

      #item:before{
        content:'';
        width:0%;
        height:100%;
        position:absolute;
        top:0%;
        left:50%;
        opacity:1;
        transform:translateX(-50%);
        background:#333;
        transition:250ms;
        z-index:-1;
      }

      #item:hover{
        color:#222222;
        background-color:  rgb(26 77 151 / 25%);
        font-weight:300;
      }

      #item:hover:before{
        background:#333;
        width:100%;
        opacity:0;
        
      }

      .logout {
        display: flex;
        align-items: center;
        background-color: rgb(26 77 151 / 25%);
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
      }

      .logout:hover{
        background-color: #222222;
        color:#77ceff;
      }

      .logout:before{
        content:'';
        width:0%;
        height:100%;
        position:absolute;
        top:0%;
        left:50%;
        opacity:1;
        transform:translateX(-50%);
        background:#222222;
        transition:350ms;
        z-index:-1;
      }

      .logout:hover:before{
        background:#222222;
        width:100%;
        opacity:0;
      }
      
      .logout i {
        margin-right: 5px;
      }
      /* Additional media queries for larger screens */
      @media screen and (max-width: 515px) {
        li {
          letter-spacing:2px;
          font-size:smaller;
        }
        .text p{
            font-size: large  ;
        }
      }
      
      .entry-info {
        width: 100%;
        height: 230px;
        flex-shrink: 0;
        border-radius: 8px;
        border: 1px solid #d9d9d9;
        background: #fff;
        margin-top: 115px;
      }

      /*css for the input fields*/
      .form-row {
        display: flex;
        flex-wrap: wrap;
        margin-bottom: 10px;
       
      }
      
      .form-column {
        flex-basis: 25%;
        padding: 0 7px;
        box-sizing: border-box;
      }
      
      label , #mgmt , #govt{
        display: block;
        margin-bottom: 5px;
        margin-top: 5px;
      }
      
      input[type="text"],
      .email{
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        font-size: large;
      }
      
      input[type="radio"]{
        margin-right: 10px;
      }
      /*for table*/
      .entry-table {
        width: 100%;
        height: 400px;
        flex-shrink: 0;
        border-radius: 8px;
        border: 1px solid #d9d9d9;
        background: #fff;
        margin-top: 10px;
      }
      
      .table-container {
        overflow-x: auto;
        margin: 20px;
      }
      
      table {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
        background-color: #f9f9f9;
      }
      
      thead {
        background-color: #333;
        color: #fff;
      }
      
      th, td, #dept, #quota {
        padding: 10px;
        text-align: center;
        border: 1px solid #ddd;
        white-space: nowrap; /* Prevent wrapping in the header cells */
        overflow: hidden; /* Hide any overflowing content in the header cells */
        text-overflow: ellipsis; /* Add ellipsis (...) if content overflows in the header cells */
        transition: all 0.3s ease; /* Add smooth transition effect */
      }
      
      td:hover,
      #dept:hover,
      #quota {
        white-space: normal; /* Show full content on hover */
        word-break: break-all; /* Allow content to wrap within the cell */
        overflow: hidden; /* Hide overflowing content in the cell */
        background-color: #fff; /* Change background on hover (optional) */
      }
      
      .long-text, #dept, #quota {
        min-width: 150px; /* Set a minimum width for the "Documents" column */
      }
      
      tbody tr:nth-child(odd) {
        background-color: #e9f4ff;
      }

      tbody tr:nth-child(even) {
        background-color: #edeef0;
      }
      
      /* Responsive styles */
      @media screen and (max-width: 600px) {
        th, td {
          font-size: 14px;
        }
      }
      
      
      .submit-button {
        text-align: center;
        margin-top: 10px;
      }
      /*for second page (down side of the webpage) */
      
      .menu-2 {
        width: 100%;
        height: 63px;
        flex-shrink: 0;
        border-radius: 8px;
        border: 1px solid #d9d9d9;
        background: #fff;
        margin-top: 10px;
      }
      .main-info-2 {
        width: 100%;
        height: 230px;
        flex-shrink: 0;
        border-radius: 8px;
        border: 1px solid #d9d9d9;
        background: #fff;
        margin-top: 10px;
      }
      .main-table-2 {
        width: 100%;
        height: 400px;
        flex-shrink: 0;
        border-radius: 8px;
        border: 1px solid #d9d9d9;
        background: #fff;
        margin-top: 10px;
      }
      .down-menu {
        width: 100%;
        height: 63px;
        flex-shrink: 0;
        border-radius: 8px;
        border: 1px solid #d9d9d9;
        background: #fff;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <!-- div for top-box for main topic and logo -->
    <div class="top-box">
        <div class="logo">
          <img src="../static/image/logo.png" alt="Logo" width="100" height="100">
        </div>  
      <div class="text">
        <h3>KGISL INSTITUTE OF TECHNOLOGY</h3>
        <h4>ADMINISTRATIVE OFFICE</h4>
        <p>ACKNOWLEDGEMENT RECEIPT-PARENT COPY-REGULAR ADMISSION</p>
      </div>
      <div class="nav-container">
  
        <ul>
          <div class="search-bar">
            <input type="number" id="receipt-number" class="search-input" placeholder="Enter Admission No" onkeypress="preventFormSubmission(event)" />
          </div>
          <li id="item">Home</li>
          <li id="item">View</li>
          <li id="item">D-board</li>
          <li class="logout" id="logout-button">
            <i class="fas fa-sign-out-alt"></i>
            Logout
          </li>
        </ul>
        
        
      </div>       
    </div>

    <div class="not important just for div space">
      <!-- main menu -->
      
      

      <!-- for entering main-info of students -->
      <div class="entry-info"> 
        <div class="form-row">
          <div class="form-column">
            <label for="name_stu"><b>NAME OF THE STUDENT:</b></label>
            <input type="text" id="name_stu" name="name_stu" required>
          </div><br>
          <div class="form-column">
            <label for="receipt"><b>ADMISSION NO:</b></label>
            <input type="text" id="receipt" name="receipt" required />
          <!--<div id="messageContainer"></div>-->
          </div>
          <div class="form-column">
            <label for="name_prnt"><b>NAME OF THE PARENT:</b></label>
            <input type="text" id="name_prnt" name="name_prnt" required>
          </div>
          <div class="form-column">
            <label for="dept"><b>DEPARMENT:</b></label>
            <div class="dropdown">
              <select id="dept" name="dept" required>
                <option disabled selected>--your Department--</option>
                <option value="CSE">CSE</option>
                <option value="AI&DS">AI&DS</option>
                <option value="IT">IT</option>
                <option value="ECE">ECE</option>
                <option value="CSBS">CSBS</option>
                <option value="MECH">MECH</option>
              </select>
              <span class="dropdown-icon"></span>
              <style>
                .dropdown {
                  position: relative;
                  display: inline-block;
                }
            
                .dropdown select {
                  -webkit-appearance: none;
                  -moz-appearance: none;
                  appearance: none;
                  outline: none;
                  border: 1px solid #ccc;
                  padding: 8px 40px 8px 12px;
                  font-size: 16px;
                  border-radius: 4px;
                  background-color: #fff;
                  cursor: pointer;
                  width: 200px;
                }
            
                .dropdown select:hover,
                .dropdown select:focus {
                  border-color: #555;
                }
            
                .dropdown-icon {
                  position: absolute;
                  top: 50%;
                  right: 12px;
                  transform: translateY(-50%);
                  pointer-events: none;
                }
            
                /* Custom styles for the dropdown arrow icon */
                .dropdown-icon::after {
                  content: '\25BC';
                  font-size: 12px;
                  color: #555;
                }
              </style>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-column">
           <label for="contact1"><b>CONTACT INFO:</b><br>STUDENT NO:</label>
            <input type="text" id="contact1" name="contact1" required> 
          </div>
          <div class="form-column">
            <br><label for="contact2">PARENT NO:</label>
            <input type="text" id="contact2" name="contact2" required>
          </div><br>
          <div class="form-column">
            <br><label for="email">EMAIL ID:</label>
            <input type="email" class="email" id="email" name="email" required>
          </div>
          <div class="form-column">
             <br><label for="quota"><b>QUOTA:</b></label>
            <div class="dropdown">
              <select id="quota" name="quota" required>
                <option disabled selected>--Select Quota--</option>
                <option value="MANAGEMENT">MANAGEMENT</option>
                <option value="GOVERNMENT">GOVERNMENT</option>
              </select>
              <span class="dropdown-icon"></span>
            </div>
          </div>
        </div>
      </div>
          

      <!-- for the table -->
      <div class="entry-table">
        <!DOCTYPE html>
        <html lang="en">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Awesome Filtering Table</title>
          <link rel="stylesheet" href="styles.css">
        </head>
        <body>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>S.no</th>
                  <th>Documents</th>
                  <th>Date</th>
                  <th>Original</th>
                  <th>Photocopy</th>
                  <th>Quantity</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>Document 11111111111111111111111111111111111111111111111111111111111111111111111111111</td>
                  <td>2023-08-01</td>
                  <td>Yes</td>
                  <td>No</td>
                  <td>10</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Document 2</td>
                  <td>2023-08-02</td>
                  <td>No</td>
                  <td>Yes</td>
                  <td>5</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>Document 3</td>
                  <td>2023-08-03</td>
                  <td>Yes</td>
                  <td>No</td>
                  <td>15</td>
                </tr>
                <!-- Add more rows as needed -->
              </tbody>
            </table>
          </div>
          <script>
            
          </script>
        
        
      </div>

      <!-- submit button -->
      <div class="submit-button">
        <button type="button" class="btn btn-success">Submit</button>
      </div>
    </div>

    <hr />

    <div class="just the same thing">
      <!-- for version control -->
      <div class="menu-2"></div>

      <!-- for viewing main info of students -->
      <div class="main-info-2"></div>

      <!-- for the table -->
      <div class="main-table-2"></div>

      <!-- down menu -->
      <div class="down-menu"></div><br />
    </div>

    <script>
      //for dept drop down box
      var deptSelect = document.getElementById('dept');

      deptSelect.addEventListener('change', function() {
        var selectedOption = deptSelect.options[deptSelect.selectedIndex];
        if (selectedOption.value !== '') {
          console.log('Selected dept:', selectedOption.value);
        }
      });



        // Adding date to the form fields
        var form = document.getElementsByTagName('form')[0];
        var date = new Date().toLocaleDateString();
        console.log(date);

        var date_field = document.createElement("input");
        date_field.type="hidden";
        date_field.name="date";
        date_field.value=date;
        form.appendChild(date_field);

        // Generate serial number, documents, date, checkbox, and quantity columns
      function generateColumns() {
        var tableRows = document.getElementById('table-body').children;
        for (var i = 0; i < tableRows.length; i++) {
          var serialNumberCell = document.createElement('td');
          serialNumberCell.textContent = i + 1;
          tableRows[i].insertBefore(serialNumberCell, tableRows[i].firstChild);
          

          var dateCell = document.createElement('td');
          var currentDate = new Date().toLocaleDateString();
          dateCell.textContent = currentDate;
          tableRows[i].appendChild(dateCell);

          var checkboxCell = document.createElement('td');
          var checkbox = document.createElement('input');
          checkbox.type = 'checkbox';
          checkbox.name = data[i] +':'+ "original";
          
          var checkboxhidden = document.createElement('input');
          checkboxhidden.type = 'hidden';
          checkboxhidden.name = data[i] +':'+ "original";
          checkboxhidden.value = 'off';
          
          checkboxCell.appendChild(checkboxhidden);
          checkboxCell.appendChild(checkbox);
          tableRows[i].appendChild(checkboxCell);
          checkboxCell.classList.add('checkboxcell');
          checkbox.classList.add('cell5');

          var checkboxCell = document.createElement('td');
          
          
          var checkbox = document.createElement('input');
          checkbox.type = 'checkbox';
          checkbox.name = data[i] +':'+ "copy";
          checkbox.setAttribute("onclick", "toggleInputField(this)");

          var checkboxhidden = document.createElement('input');
          checkboxhidden.type = 'hidden';
          checkboxhidden.name = data[i] +':'+ "copy";
          checkboxhidden.value = 'off';

          checkboxCell.appendChild(checkboxhidden);
          checkboxCell.appendChild(checkbox);
          tableRows[i].appendChild(checkboxCell);
          checkboxCell.classList.add('checkboxcell');
          checkbox.classList.add('cell5');


          var quantityCell = document.createElement('td');
          var quantityInput = document.createElement('input');
          quantityInput.type = 'number';
          quantityInput.min = '0';
          quantityInput.value = '0';
          quantityInput.name = data[i] +':'+ "count";
          quantityInput.readOnly = true;
          quantityCell.appendChild(quantityInput);
          tableRows[i].appendChild(quantityCell);
          quantityCell.classList.add('cell4');
          quantityInput.classList.add('cell3');
        }
      }

      // Example data for the table
      var data = [
      {% for name in file_names%}  
      '{{name}}',
      {% endfor %}
      ];

      // Generate table rows
      var tableBody = document.getElementById('table-body');
      for (var i = 0; i < data.length; i++) {
        var row = document.createElement('tr');
        var dataCell = document.createElement('td');
        dataCell.textContent = data[i];
        row.appendChild(dataCell);
        tableBody.appendChild(row);
      }

      // Call the function to generate serial numbers, dates, checkboxes, and quantities
      generateColumns();

      //search function
      function searchReceipt(){
        var receiptNumber = document.getElementById("receipt-number").value;
        var searchTerm = receiptNumber.value;
        // Redirect the user to the next page
        window.location.href = "view/"+receiptNumber; // Replace "next-page.html" with the actual URL of the next page

      }

      // Function to prevent form submission when Enter key is pressed in the search input
      function preventFormSubmission(event) {
        if (event.key === 'Enter') {
          event.preventDefault();
          searchReceipt();
        }
      }

      // function for searching admission number 
      function populateSearchValue() {
        var searchValue = sessionStorage.getItem('searchValue');
        if (searchValue) {
          document.getElementById("receipt-number").value = searchValue;
        }
      }
      populateSearchValue();


      </script>
  </body>
</html>
